{% extends "base.html" %}
{% load i18n %}

{% block title %}修改默认密码{% endblock %}

{% block content %}
<h1>首次登录请修改密码</h1>
<p>系统为新账号分配了默认密码，请立即修改。完成后会自动跳转到之前的页面。</p>
<div class="callout">
  <strong>密码规范：</strong>建议至少 8 位，避免使用个人信息或常用弱口令，不能是纯数字。遵循下方规则提示填写，否则会显示错误信息。
  {% if form.new_password1.help_text %}
    <div class="help">{{ form.new_password1.help_text|safe }}</div>
  {% endif %}
</div>

<form method="post" novalidate>
  {% csrf_token %}

  {% if form.non_field_errors %}
  <ul class="errorlist">
    {% for error in form.non_field_errors %}
      <li>{{ error }}</li>
    {% endfor %}
  </ul>
  {% endif %}

  <div class="form-field{% if form.new_password1.errors %} has-error{% endif %}">
    <label for="id_new_password1">新密码</label>
    {{ form.new_password1 }}
    {% for error in form.new_password1.errors %}
      <div class="errorlist"><span>{{ error }}</span></div>
    {% endfor %}
  </div>
  <div class="form-field{% if form.new_password2.errors %} has-error{% endif %}">
    <label for="id_new_password2">确认新密码</label>
    {{ form.new_password2 }}
    {% for error in form.new_password2.errors %}
      <div class="errorlist"><span>{{ error }}</span></div>
    {% endfor %}
  </div>
  <input type="hidden" name="next" value="{{ next }}" />
  <input type="submit" value="更新密码" class="button" />
</form>
{% endblock %}
